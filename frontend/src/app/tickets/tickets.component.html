<div class="page-padding w-full flex flex-col items-center gap-8">

  @if (ticketService.isLoadingTickets) {
    <div class="w-full flex flex-col items-center gap-2">
      <h1 class="text-accent text-3xl font-semibold text-center">Loading Tickets...</h1>
      <p class="text-gray-400 font-light">Please wait while we fetch your tickets.</p>
    </div>

    <app-spinner-icon></app-spinner-icon>
  }

  @else if (!ticketService.isLoadingTickets && tickets) {
    <header class="w-full flex flex-col items-center gap-2">

      @if (justPurchased) {
        <h1 class="text-accent text-3xl font-semibold text-center">Tickets Purchased</h1>
        <p class="text-gray-400 font-light">Your purchase was successful! Here are your new tickets!</p>
      }
      @else {
        <h1 class="text-accent text-3xl font-semibold text-center">Tickets</h1>
        <p class="text-gray-400 font-light">Here are your tickets!</p>
      }
    </header>

    <hr class="border w-full border-accent">

    <div class="grid lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-8">
      @for (ticket of tickets; track ticket) {
        <app-ticket-panel [ticket]="ticket" [eventName]="ticket.name" [eventDate]="ticket.date" [eventTime]="ticket.time" ></app-ticket-panel>
      }
    </div>

    <app-other-events [ignoreEventId]="tickets[0].event_id"></app-other-events>
  }

  @else {
    <div class="w-full flex flex-col items-center gap-2">
      <h1 class="text-accent text-3xl font-semibold text-center">No Tickets Found</h1>
      <p class="text-gray-400 font-light">
        @if (ticketService.loadTicketsError) {
          <span>{{ ticketService.loadTicketsError }}</span>
        }
        @else {
          <span>Something went wrong. Try again later.</span>
        }
      </p>
    </div>

    <app-other-events></app-other-events>
  }

</div>
